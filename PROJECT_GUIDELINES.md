# é¡¹ç›®å¼€å‘è§„èŒƒä¸æ¶æ„æŒ‡å—

æœ¬é¡¹ç›®é‡‡ç”¨ **Feature-First (åŠŸèƒ½ä¼˜å…ˆ)** çš„æ¶æ„æ¨¡å¼ï¼Œæ—¨åœ¨ç¡®ä¿ä»£ç åœ¨ä¸šåŠ¡å¢é•¿æ—¶ä¿æŒé«˜å†…èšã€ä½è€¦åˆã€‚

## 1. ç›®å½•ç»“æ„è§„èŒƒ

### `src/app` (è·¯ç”±å±‚) - åŸºäºè·¯ç”±ç»„æ¶æ„

#### 1.1 è·¯ç”±ç»„ (Route Groups) æ¦‚è¿°

é‡‡ç”¨ **Route Groups** æ¨¡å¼ï¼Œç”¨ `(groupName)` å‘½åè§„èŒƒç»„ç»‡ç›¸å…³è·¯ç”±ã€‚æ‹¬å·ä¸å½±å“ URL è·¯å¾„ï¼Œä½†æä¾›é€»è¾‘åˆ†ç»„å’Œå…±äº« Layoutï¼š

```
src/app/
â”œâ”€â”€ (auth)/              # è®¤è¯è·¯ç”±ç»„
â”‚   â”œâ”€â”€ layout.tsx       # è®¤è¯æµç¨‹å…±äº«å¸ƒå±€ï¼ˆå±…ä¸­è¡¨å•ï¼‰
â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ register/
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ forgot-password/
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â””â”€â”€ reset-password/
â”‚       â””â”€â”€ page.tsx
â”‚
â”œâ”€â”€ (public)/            # å…¬å¼€å†…å®¹è·¯ç”±ç»„
â”‚   â”œâ”€â”€ layout.tsx       # ç»§æ‰¿å…¨å±€ Navbar/Footer
â”‚   â”œâ”€â”€ page.tsx         # ä¸»é¡µ
â”‚   â”œâ”€â”€ blog/
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ market/
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ pricing/
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â””â”€â”€ detail/
â”‚       â””â”€â”€ [id]/
â”‚           â””â”€â”€ page.tsx
â”‚
â”œâ”€â”€ (protected)/         # å—ä¿æŠ¤çš„ä»ªè¡¨æ¿è·¯ç”±ç»„
â”‚   â”œâ”€â”€ layout.tsx       # è®¤è¯å®ˆå« + è§’è‰²æ£€æŸ¥
â”‚   â”œâ”€â”€ account/
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â””â”€â”€ console/
â”‚       â”œâ”€â”€ layout.tsx   # æ§åˆ¶å°ç‰¹å®šå¸ƒå±€
â”‚       â”œâ”€â”€ page.tsx     # ä»ªè¡¨æ¿ä¸»é¡µ
â”‚       â””â”€â”€ settings/
â”‚           â”œâ”€â”€ layout.tsx
â”‚           â””â”€â”€ page.tsx
â”‚
â”œâ”€â”€ _demo/               # å¼€å‘æ¼”ç¤ºè·¯ç”±ç»„ï¼ˆä¸‹åˆ’çº¿å‰ç¼€ä¸ç”Ÿæˆè·¯ç”±ï¼‰
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â””â”€â”€ typography/
â”‚       â””â”€â”€ page.tsx
â”‚
â”œâ”€â”€ api/                 # API è·¯ç”±
â”‚   â”œâ”€â”€ auth/
â”‚   â””â”€â”€ user/
â”‚
â”œâ”€â”€ layout.tsx           # å…¨å±€æ ¹å¸ƒå±€ï¼ˆNavbar, Footer, Providersï¼‰
â””â”€â”€ globals.css
```

#### 1.2 å„è·¯ç”±ç»„çš„èŒè´£ä¸å¸ƒå±€ç­–ç•¥

| è·¯ç”±ç»„ | ç”¨é€” | å¸ƒå±€ç‰¹ç‚¹ | è®¿é—®æ§åˆ¶ |
|------|------|--------|--------|
| **(auth)** | ç™»å½•ã€æ³¨å†Œã€å¯†ç é‡ç½® | å±…ä¸­è¡¨å•å¸ƒå±€ï¼Œæœ€å¤§å®½åº¦ 28rem | æ— éœ€è®¤è¯ |
| **(public)** | è¥é”€å†…å®¹ã€åšå®¢ã€äº§å“è¯¦æƒ… | ç»§æ‰¿å…¨å±€ Navbar/Footer | æ— éœ€è®¤è¯ |
| **(protected)** | ç”¨æˆ·ä»ªè¡¨æ¿ã€è®¾ç½®ã€è´¦æˆ·ç®¡ç† | å®Œæ•´å¸ƒå±€ + ä¾§è¾¹æ /èœå• | **éœ€è¦è®¤è¯** |
| **_demo** | ç»„ä»¶å±•ç¤ºã€å¼€å‘å·¥å…· | å¼€å‘ç¯å¢ƒä¸“ç”¨ | å†…éƒ¨ä½¿ç”¨ |
| **api** | RESTful ç«¯ç‚¹ | æ— å¸ƒå±€ï¼ˆè·¯ç”±å¤„ç†å‡½æ•°ï¼‰| æ ¹æ®ç«¯ç‚¹å®šä¹‰ |

#### 1.3 æ ¹å¸ƒå±€ä¸ Providers

**`src/app/layout.tsx`** æ˜¯å…¨å±€çˆ¶å¸ƒå±€ï¼Œè´Ÿè´£ï¼š
1. è®¾ç½®å…¨å±€æ ·å¼ã€å­—ä½“ã€å…ƒæ•°æ®
2. é…ç½® ThemeProviderï¼ˆä¸»é¢˜åˆ‡æ¢ï¼‰
3. é…ç½® AuthProviderï¼ˆè®¤è¯ä¸Šä¸‹æ–‡ï¼‰
4. æ¸²æŸ“å…¨å±€ Navbar å’Œ Footerï¼ˆå§‹ç»ˆå¯è§ï¼‰
5. é€šè¿‡ `{children}` åµŒå…¥å­å¸ƒå±€å’Œé¡µé¢

æ‰€æœ‰è·¯ç”±ç»„çš„ Layout åº”ç»§æ‰¿å…¨å±€ Navbar/Footerï¼Œé¿å…é‡å¤æ¸²æŸ“ã€‚

#### 1.4 é¡µé¢æ–‡ä»¶è§„èŒƒ

- **èŒè´£**: å®šä¹‰è·¯ç”±ã€å¸ƒå±€ (Layout)ã€å…ƒæ•°æ® (Metadata) å’ŒæœåŠ¡ç«¯æ•°æ®è·å–ã€‚
- **è§„èŒƒ**: é¡µé¢ç»„ä»¶åº”ä¿æŒ"è–„"ï¼Œä¸»è¦è´Ÿè´£ç»„åˆ `features` ä¸­çš„ä¸šåŠ¡ç»„ä»¶ã€‚é¿å…åœ¨é¡µé¢æ–‡ä»¶ä¸­ç›´æ¥å®šä¹‰å¤æ‚çš„è¡¨å•æˆ–ä¸šåŠ¡é€»è¾‘ã€‚
- **æ¯ä¸ª page.tsx åº”åŒ…å«**:
  - é™æ€æˆ–åŠ¨æ€å…ƒæ•°æ®é…ç½®
  - æ•°æ®è·å–é€»è¾‘ï¼ˆå¦‚éœ€è¦ï¼‰
  - ç»„åˆç›¸å…³çš„ feature ç»„ä»¶

### `src/features` (ä¸šåŠ¡åŠŸèƒ½å±‚)
- **èŒè´£**: åŒ…å«ç‰¹å®šä¸šåŠ¡é¢†åŸŸçš„æ‰€æœ‰é€»è¾‘ï¼Œä¸è·¯ç”±ç»„ç‹¬ç«‹ï¼ŒåŸºäºåŠŸèƒ½åŸŸç»„ç»‡ã€‚
- **ç‰¹ç‚¹**: ä¸€ä¸ª feature é€šå¸¸ä¼šè¢«å¤šä¸ªé¡µé¢æˆ–è·¯ç”±ç»„ä½¿ç”¨ï¼Œå®ç°ä»£ç å¤ç”¨ã€‚
- **å†…éƒ¨ç»“æ„**:
  - `actions/`: Server Actionsï¼Œè´Ÿè´£å¤„ç†è¡¨å•æäº¤å’Œä¸šåŠ¡é€»è¾‘ã€‚
  - `components/`: è¯¥åŠŸèƒ½ç‰¹æœ‰çš„ UI ç»„ä»¶ã€‚
  - `hooks/`: (å¯é€‰) è¯¥åŠŸèƒ½ç‰¹æœ‰çš„ React Hooksã€‚
  - `schemas.ts`: Zod æ ¡éªŒæ¨¡å¼ã€‚
  - `types.ts`: TypeScript ç±»å‹å®šä¹‰ã€‚
  - `index.ts`: å…¬å…± API å¯¼å‡ºæ–‡ä»¶ã€‚**å¤–éƒ¨æ¨¡å—åªèƒ½é€šè¿‡ index.ts å¯¼å…¥è¯¥ feature çš„å†…å®¹ã€‚**

**ç¤ºä¾‹**: `src/features/auth/` åŒ…å«è®¤è¯ç›¸å…³çš„æ‰€æœ‰é€»è¾‘ï¼ˆè¡¨å•ã€Server Actionsã€ç±»å‹ã€æ•°æ®éªŒè¯ï¼‰ï¼Œè¢« `/(auth)/login`ã€`/(auth)/register` ç­‰å¤šä¸ªé¡µé¢å…±åŒä½¿ç”¨ã€‚

### `src/components` (é€šç”¨ç»„ä»¶å±‚)
- `ui/`: åŸºç¡€åŸå­ç»„ä»¶ (å¦‚ Button, Input)ï¼Œé€šå¸¸ç”± shadcn/ui ç”Ÿæˆã€‚
- `shared/`: è·¨ä¸šåŠ¡åŠŸèƒ½çš„é€šç”¨ç»„ä»¶ (å¦‚ Navbar, Footer, ThemeToggle)ã€‚

### `src/lib` (åŸºç¡€è®¾æ–½å±‚)
- `db/`: æ•°æ®åº“é…ç½®ã€Schema å®šä¹‰ã€‚
- `db/dao/`: Data Access Objectsï¼Œå°è£…åº•å±‚çš„æ•°æ®åº“ CRUD æ“ä½œã€‚
- `services/`: å¤æ‚çš„è·¨æ¨¡å—ä¸šåŠ¡é€»è¾‘ã€‚
- `utils.ts`: é€šç”¨å·¥å…·å‡½æ•°ã€‚

## 2. å¼€å‘åŸåˆ™

1.  **å•å‘ä¾èµ–**: `features` ä¹‹é—´åº”å°½é‡å‡å°‘ç›´æ¥ä¾èµ–ã€‚å¦‚æœå¤šä¸ª feature éœ€è¦å…±äº«é€»è¾‘ï¼Œè€ƒè™‘å°†å…¶æå–åˆ° `lib` æˆ– `components/shared`ã€‚
2.  **DAO å°è£…**: ä¸è¦ç›´æ¥åœ¨ Server Actions ä¸­è°ƒç”¨ Drizzle çš„ `db.select()` ç­‰æ–¹æ³•ï¼Œåº”é€šè¿‡ `lib/db/dao` è¿›è¡Œå°è£…ï¼Œä¾¿äºæµ‹è¯•å’Œå¤ç”¨ã€‚
3.  **Server Actions**: æ‰€æœ‰çš„è¡¨å•æäº¤å’ŒçŠ¶æ€å˜æ›´åº”ä½¿ç”¨ Server Actionsã€‚
4.  **ç±»å‹å®‰å…¨**: å……åˆ†åˆ©ç”¨ TypeScript å’Œ Zodï¼Œç¡®ä¿ä»æ•°æ®åº“åˆ° UI çš„å…¨é“¾è·¯ç±»å‹å®‰å…¨ã€‚
5.  **å¯¼å‡ºè§„èŒƒ**: å§‹ç»ˆä½¿ç”¨ `index.ts` å¯¼å‡º feature çš„å…¬å…±æ¥å£ï¼Œé¿å…æ·±å±‚å¯¼å…¥ï¼ˆå¦‚ `import { ... } from "@/features/auth/actions/login"`ï¼‰ã€‚
6.  **è·¯ç”±ç»„ä¸ Feature çš„å…³ç³»**: 
   - **è·¯ç”±ç»„** (`(auth)`, `(public)`, `(protected)`) æ˜¯ **å¯¼èˆªç»“æ„** å’Œ **å¸ƒå±€å±‚çº§**ï¼Œå®šä¹‰é¡µé¢è®¿é—®æµç¨‹å’Œå…±äº« UIã€‚
   - **Features** æ˜¯ **ä¸šåŠ¡é€»è¾‘åŸŸ**ï¼Œä¸è·¯ç”±ç»„è§£è€¦ï¼Œå¯è¢«å¤šä¸ªè·¯ç”±é‡ç”¨ã€‚
   - ç¤ºä¾‹: `/(auth)/login` é¡µé¢å¯¼å…¥ `@/features/auth` ä¸­çš„ç™»å½•è¡¨å•ç»„ä»¶å’Œ `loginAction`ã€‚
7.  **Layout æœ€å°åŒ–åŸåˆ™**:
   - æ ¹ Layout æä¾›å…¨å±€ Navbarã€Footerã€Providersï¼ˆä¸»é¢˜ã€è®¤è¯ï¼‰ã€‚
   - è·¯ç”±ç»„ Layout ä»…æ·»åŠ è¯¥ç»„ç‰¹å®šçš„å¸ƒå±€éœ€æ±‚ï¼ˆå¦‚ `(auth)` çš„å±…ä¸­å®¹å™¨ï¼‰ã€‚
   - é¿å…åœ¨æ¯ä¸ª Layout ä¸­é‡å¤æ¸²æŸ“ Navbar/Footerï¼Œä½¿ç”¨ä»çˆ¶ Layout ç»§æ‰¿ã€‚

## 3. å‘½åçº¦å®š

-   **ç»„ä»¶**: å¤§é©¼å³° (PascalCase)ï¼Œå¦‚ `LoginForm.tsx`ã€‚
-   **æ–‡ä»¶/æ–‡ä»¶å¤¹**: å°å†™æ¨ªæ  (kebab-case)ï¼Œå¦‚ `update-profile.ts`ã€‚
-   **Actions**: ä»¥ `Action` ç»“å°¾ï¼Œå¦‚ `loginAction`ã€‚
-   **DAO**: ä»¥ `dao` ç»“å°¾ï¼Œå¦‚ `usersDao`ã€‚
-   **è·¯ç”±ç»„**: ç”¨ `(groupName)` æ ¼å¼ï¼Œå¦‚ `(auth)`, `(public)`, `(protected)`ã€‚

## 3.1 è·¯ç”±ç»„æœ€ä½³å®è·µ (Route Groups Best Practices)

### è®¤è¯è·¯ç”±ç»„ `(auth)`
- **ç”¨é€”**: æ‰€æœ‰è®¤è¯æµç¨‹ï¼ˆç™»å½•ã€æ³¨å†Œã€å¯†ç é‡ç½®ï¼‰
- **URL ç¤ºä¾‹**: `/login`, `/register`, `/forgot-password`, `/reset-password`
- **Layout ç‰¹ç‚¹**: 
  ```tsx
  // /(auth)/layout.tsx - å±…ä¸­è¡¨å•å¸ƒå±€
  export default function AuthLayout({ children }) {
    return (
      <div className="flex items-center justify-center min-h-screen">
        <div className="w-full max-w-md">{children}</div>
      </div>
    );
  }
  ```
- **ä¸åº”åŒ…å«**: Navbarã€Footerã€ä¾§è¾¹æ ç­‰ï¼ˆä¿æŒæç®€ï¼‰
- **å…ƒæ•°æ®**: ä½¿ç”¨ `noindex, nofollow` é˜²æ­¢æœç´¢å¼•æ“ç´¢å¼•
- **è®¿é—®æ§åˆ¶**: æ— éœ€è®¤è¯å³å¯è®¿é—®

### å…¬å¼€è·¯ç”±ç»„ `(public)`
- **ç”¨é€”**: æ‰€æœ‰è¥é”€å†…å®¹ã€å…¬å¼€åšå®¢ã€äº§å“ä¿¡æ¯ã€å®šä»·é¡µé¢
- **URL ç¤ºä¾‹**: `/`, `/blog`, `/market`, `/pricing`, `/detail/[id]`
- **Layout ç‰¹ç‚¹**: Layout ä¸ºç©ºæˆ–ä»…è¿”å› `{children}`ï¼ˆç»§æ‰¿å…¨å±€ Navbar/Footerï¼‰
  ```tsx
  // /(public)/layout.tsx - ç»§æ‰¿å…¨å±€å¸ƒå±€
  export default function PublicLayout({ children }) {
    return <>{children}</>;
  }
  ```
- **å…ƒæ•°æ®**: åŒ…å«å®Œæ•´çš„ SEO å…ƒæ•°æ®ï¼ˆtitle, description, keywordsï¼‰
- **æ¯ä¸ª page.tsx**: åº”è®¾ç½®é¡µé¢çº§åˆ«çš„ `generateMetadata()`
- **è®¿é—®æ§åˆ¶**: æ— éœ€è®¤è¯å³å¯è®¿é—®

### å—ä¿æŠ¤è·¯ç”±ç»„ `(protected)`
- **ç”¨é€”**: æ‰€æœ‰éœ€è¦è®¤è¯çš„ç”¨æˆ·åŠŸèƒ½ï¼ˆä»ªè¡¨æ¿ã€è®¾ç½®ã€è´¦æˆ·ï¼‰
- **URL ç¤ºä¾‹**: `/console`, `/console/settings`, `/account`
- **Layout å¿…éœ€**: å®ç°è®¤è¯å®ˆå«
  ```tsx
  // /(protected)/layout.tsx - è®¤è¯å®ˆå«
  'use client';
  import { useAuth } from '@/features/auth';
  import { redirect } from 'next/navigation';
  
  export default function ProtectedLayout({ children }) {
    const { user } = useAuth();
    
    if (!user) {
      redirect('/login');
    }
    
    return <>{children}</>;
  }
  ```
- **ç‰¹ç‚¹**: æœªè®¤è¯ç”¨æˆ·è‡ªåŠ¨é‡å®šå‘åˆ°ç™»å½•é¡µ
- **å­å¸ƒå±€**: å¦‚ `console/layout.tsx` å¯æ·»åŠ ä»ªè¡¨æ¿ç‰¹å®šçš„ä¾§è¾¹æ /èœå•
- **è®¿é—®æ§åˆ¶**: **éœ€è¦è®¤è¯**

### æ¼”ç¤ºè·¯ç”±ç»„ `_demo`
- **ç”¨é€”**: å¼€å‘æœŸé—´çš„æ¼”ç¤ºé¡µé¢ã€ç»„ä»¶å±•ç¤ºã€æ’ç‰ˆæ¼”ç¤º
- **URL**: ä¸‹åˆ’çº¿å‰ç¼€ `_demo` ä¸ä¼šç”Ÿæˆè·¯ç”±ï¼Œä½†å¯é€šè¿‡ `/_demo/typography` è®¿é—®
- **ç‰¹ç‚¹**: ä»…åœ¨å¼€å‘ä¸­ä½¿ç”¨ï¼Œç”Ÿäº§ç¯å¢ƒåº”ç§»é™¤
- **è®¿é—®æ–¹å¼**: `http://localhost:3000/_demo/typography`

### API è·¯ç”±
- **ç»“æ„**: `/api/auth/`, `/api/user/` ç­‰
- **æ–‡ä»¶**: ä½¿ç”¨ `route.ts` å®šä¹‰ GETã€POST ç­‰å¤„ç†å‡½æ•°
- **è¿”å›æ ¼å¼**: ç»Ÿä¸€è¿”å› JSON
- **ç¤ºä¾‹**:
  ```typescript
  // src/app/api/auth/route.ts
  export async function POST(request: Request) {
    // å¤„ç†è®¤è¯è¯·æ±‚
    return Response.json({ data: {...} });
  }
  ```

## 4. UI ç»„ä»¶åº“è§„èŒƒ (shadcn/ui)

### 4.1 æ¦‚è¿°

æœ¬é¡¹ç›®ä½¿ç”¨ **shadcn/ui** ä½œä¸ºä¸»è¦çš„ UI ç»„ä»¶åº“ï¼Œè¿™æ˜¯ä¸€ä¸ªåŸºäº Radix UI å’Œ Tailwind CSS çš„é«˜è´¨é‡ç»„ä»¶åˆé›†ã€‚æ‰€æœ‰åŸå­ç»„ä»¶ï¼ˆButtonã€Inputã€Tabs ç­‰ï¼‰éƒ½åº”ä» shadcn/ui å®‰è£…ï¼Œç¡®ä¿è®¾è®¡ä¸€è‡´æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

### 4.2 ç»„ä»¶åˆ†ç±»ä¸ä½¿ç”¨åŸåˆ™

#### åŸå­ç»„ä»¶ (`src/components/ui/`)
è¿™äº›æ˜¯ç”± shadcn/ui æä¾›çš„åŸºç¡€ç»„ä»¶ï¼Œé€šè¿‡ CLI å®‰è£…ã€‚

| ç»„ä»¶ | ç”¨é€” | H5 é€‚é… |
|-----|------|--------|
| **Button** | æ‰€æœ‰äº¤äº’æŒ‰é’® | âœ… 44Ã—44px æœ€å°ç‚¹å‡»åŒºåŸŸ |
| **Input** | è¡¨å•è¾“å…¥æ¡† | âœ… 16px æœ€å°å­—å·ï¼Œç¦ç”¨è‡ªåŠ¨æ”¾å¤§ |
| **Card** | å¡ç‰‡å®¹å™¨ | âœ… å“åº”å¼å†…é—´è· |
| **Tabs** | æ ‡ç­¾å¯¼èˆª | âœ… ä¸Šä¸‹å¸ƒå±€å‹å¥½ï¼Œç§»åŠ¨ç«¯ä¼˜å…ˆ |
| **Select** | ä¸‹æ‹‰é€‰æ‹© | âœ… åŸç”Ÿé€‚é…ç§»åŠ¨ç«¯ |
| **Dialog/Modal** | æ¨¡æ€æ¡† | âœ… å…¨å±é€‚é…ï¼Œé¿å…è¶…å‡ºè§†å£ |

#### ä¸šåŠ¡ç»„ä»¶ (`src/components/shared/`)
åŸºäºåŸå­ç»„ä»¶çš„åˆæˆç»„ä»¶ï¼Œå®ç°ç‰¹å®šçš„ä¸šåŠ¡éœ€æ±‚ã€‚

ä¾‹å¦‚ï¼š`SettingsTabs`ã€`Navbar`ã€`Footer` ç­‰ã€‚

### 4.3 å®‰è£…ä¸ç»´æŠ¤

**å®‰è£…æ–°ç»„ä»¶çš„æ ‡å‡†æµç¨‹**ï¼š

```bash
# ä½¿ç”¨æœ€æ–°çš„ shadcn CLI
npx shadcn@latest add <component-name> --yes

# ç¤ºä¾‹ï¼šå®‰è£… Dialog ç»„ä»¶
npx shadcn@latest add dialog --yes
```

**æ›´æ–°ç°æœ‰ç»„ä»¶**ï¼š

```bash
# è¦†ç›–å¼æ›´æ–°ï¼ˆè·å–å®˜æ–¹æœ€æ–°ç‰ˆæœ¬ï¼‰
npx shadcn@latest add <component-name> --overwrite --yes
```

**å¸¸ç”¨ç»„ä»¶æ¸…å•**ï¼š
- `button` - æŒ‰é’®
- `input` - è¾“å…¥æ¡†
- `card` - å¡ç‰‡
- `tabs` - æ ‡ç­¾é¡µ
- `select` - ä¸‹æ‹‰é€‰æ‹©
- `dialog` - å¯¹è¯æ¡†
- `form` - è¡¨å•å®¹å™¨
- `label` - è¡¨å•æ ‡ç­¾
- `textarea` - å¤šè¡Œæ–‡æœ¬æ¡†
- `checkbox` - å¤é€‰æ¡†

### 4.4 H5 å‹å¥½çš„ç»„ä»¶é…ç½®

æ‰€æœ‰ UI ç»„ä»¶åº”éµå¾ªä»¥ä¸‹ H5 é€‚é…åŸåˆ™ï¼š

#### æœ€å°ç‚¹å‡»åŒºåŸŸ
æŒ‰é’®å’Œäº¤äº’å…ƒç´ å¿…é¡»æ»¡è¶³ **44Ã—44px** çš„æœ€å°ç‚¹å‡»åŒºåŸŸï¼š

```tsx
// âŒ ä¸æ¨è
<Button size="sm" className="h-8 w-8">å°æŒ‰é’®</Button>

// âœ… æ¨è
<Button size="default" className="h-11 w-11">
  æ ‡å‡†æŒ‰é’®
</Button>
```

#### è¾“å…¥æ¡†ä¼˜åŒ–
è¾“å…¥æ¡†å¿…é¡»é‡‡ç”¨ **16px** åŠä»¥ä¸Šçš„å­—å·ï¼Œé˜²æ­¢ iOS Safari è‡ªåŠ¨æ”¾å¤§ï¼š

```tsx
// âŒ ä¸æ¨èï¼ˆå­—å·è¿‡å°ï¼‰
<Input className="text-sm" placeholder="è¾“å…¥..." />

// âœ… æ¨èï¼ˆå­—å·å……åˆ†ï¼‰
<Input className="text-base" placeholder="è¾“å…¥..." />
```

#### å“åº”å¼å¸ƒå±€
ä½¿ç”¨ Tailwind çš„å“åº”å¼å‰ç¼€ç¡®ä¿åœ¨å„å±å¹•å°ºå¯¸ä¸‹éƒ½èƒ½è‰¯å¥½å±•ç¤ºï¼š

```tsx
// âœ… å“åº”å¼æ ‡ç­¾é¡µå¸ƒå±€
<Tabs defaultValue="tab1" className="w-full">
  <TabsList className="grid w-full grid-cols-2 sm:grid-cols-3">
    {/* ç§»åŠ¨ç«¯ 2 åˆ—ï¼Œå¹³æ¿ 3 åˆ— */}
  </TabsList>
</Tabs>
```

#### è§¦æ‘¸åé¦ˆ
æ‰€æœ‰å¯äº¤äº’çš„å…ƒç´ åº”æä¾›æ˜æ˜¾çš„è§¦æ‘¸åé¦ˆï¼š

```tsx
// âœ… æä¾› active æ€åé¦ˆ
<button className="active:scale-[0.98] transition-transform">
  ç‚¹å‡»åé¦ˆ
</button>
```

### 4.5 ç»„ä»¶å®šåˆ¶æŒ‡å—

å¦‚éœ€å®šåˆ¶ç»„ä»¶æ ·å¼ï¼Œéµå¾ªä»¥ä¸‹åŸåˆ™ï¼š

1. **ä¸ä¿®æ”¹åŸå­ç»„ä»¶** - shadcn/ui ç»„ä»¶åº”ä¿æŒåŸå§‹çŠ¶æ€
2. **é€šè¿‡ä¸šåŠ¡ç»„ä»¶åŒ…è£…** - åˆ›å»ºæ–°çš„ä¸šåŠ¡ç»„ä»¶æ¥å®šåˆ¶
3. **ä½¿ç”¨ Tailwind æ‰©å±•** - åˆ©ç”¨ `className` è¿›è¡Œæ ·å¼è°ƒæ•´

```tsx
// âŒ é”™è¯¯ï¼šç›´æ¥ä¿®æ”¹ src/components/ui/button.tsx
// âŒ ä¸è¦è¿™æ ·åš

// âœ… æ­£ç¡®ï¼šåˆ›å»ºä¸šåŠ¡ç»„ä»¶
import { Button } from "@/components/ui";

export function PrimaryButton(props) {
  return (
    <Button 
      className="bg-gradient-to-r from-primary to-primary/80"
      {...props}
    />
  );
}
```

### 4.6 å¸¸è§æ¨¡å¼ - H5 å‹å¥½çš„è®¾ç½®é¡µé¢

ä»¥ `SettingsTabs` ç»„ä»¶ä¸ºä¾‹ï¼Œå±•ç¤º H5 å‹å¥½çš„å®ç°ï¼š

```tsx
import { SettingsTabs } from "@/components/shared";
import { User, Lock } from "lucide-react";

export function SettingsPage() {
  return (
    <SettingsTabs
      tabs={[
        {
          id: "profile",
          label: "ä¸ªäººèµ„æ–™",
          description: "ç®¡ç†è´¦æˆ·ä¿¡æ¯",
          icon: User,
          content: <ProfileForm />,
        },
        {
          id: "password",
          label: "ä¿®æ”¹å¯†ç ",
          description: "æ›´æ–°å¯†ç ",
          icon: Lock,
          content: <PasswordForm />,
        },
      ]}
      orientation="horizontal"  // ä¸Šä¸‹å¸ƒå±€ï¼ŒH5 å‹å¥½
    />
  );
}
```

**H5 ä¼˜åŠ¿**ï¼š
- âœ… æ ‡ç­¾å¯¼èˆªä½äºé¡¶éƒ¨ï¼Œæ˜“äºè§¦æ‘¸
- âœ… å†…å®¹åŒºåŸŸå æ®æ•´ä¸ªå®½åº¦ï¼Œå……åˆ†åˆ©ç”¨å±å¹•
- âœ… æ¨ªå‘æ»šåŠ¨å‹å¥½
- âœ… ç§»åŠ¨è®¾å¤‡ç«–å±æ¨¡å¼æœ€ä¼˜

## 5. å­—ä½“ä¸æ’ç‰ˆè§„èŒƒ

### 5.1 å­—ä½“æ—é…ç½® (Font Family)

é‡‡ç”¨åˆ†å±‚å›é€€æœºåˆ¶ï¼Œä¼˜å…ˆä½¿ç”¨ç³»ç»ŸåŸç”Ÿå­—ä½“ï¼Œé¿å…å¤–éƒ¨å­—ä½“åŠ è½½å¸¦æ¥çš„æ€§èƒ½é—®é¢˜ã€‚

**æ— è¡¬çº¿å­—ä½“ (Sans-serif) - ç”¨äºæ ‡é¢˜ã€æ­£æ–‡ã€UI å…ƒç´ **
- **iOS/macOS**: San Francisco, PingFang SC
- **Windows**: Segoe UI, Microsoft YaHei  
- **Android**: Roboto, Noto Sans CJK SC
- **å›é€€é“¾**: `-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Simplified Chinese", sans-serif`

**ç­‰å®½å­—ä½“ (Monospace) - ç”¨äºä»£ç ã€è¡¨å•æ•°æ®ã€æ•°å€¼**
- å›é€€é“¾: `ui-monospace, SFMono-Regular, "SF Mono", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace`

### 5.2 å­—ä½“æ¸²æŸ“ä¼˜åŒ– (Rendering)

åœ¨ `body` æ ‡ç­¾ä¸­åº”ç”¨ä»¥ä¸‹ CSS ä¼˜åŒ–ï¼Œä¿®å¤ä¸åŒæµè§ˆå™¨ä¸‹çš„å­—ä½“ç²—ç»†ä¸å‡å’Œé”¯é½¿é—®é¢˜ï¼š

```css
body {
  -webkit-font-smoothing: antialiased;  /* Mac ç³»ç»Ÿå¹³æ»‘ */
  -moz-osx-font-smoothing: grayscale;   /* Firefox å¹³æ»‘ */
  text-rendering: optimizeLegibility;   /* æ–‡æœ¬å¾®è°ƒ */
  -webkit-text-size-adjust: 100%;       /* ç¦ç”¨ç§»åŠ¨ç«¯è‡ªåŠ¨æ”¾å¤§ */
}
```

### 5.3 å­—é˜¶ä¸è¡Œé«˜è§„èŒƒ (Typography Scale)

é‡‡ç”¨ 4px ä¸ºåŸºæ•°çš„å€æ•°å…³ç³»ï¼Œç¡®ä¿è§†è§‰èŠ‚å¥ä¸¥è°¨ã€‚æ‰€æœ‰æ ·å¼é€šè¿‡ Tailwind CSS å·¥å…·ç±»åº”ç”¨ã€‚

| ç­‰çº§ | å­—å· | è¡Œé«˜ | æƒé‡ | Tailwind ç±» | ä½¿ç”¨åœºæ™¯ |
|-----|------|------|------|------------|----------|
| **ä¸€çº§æ ‡é¢˜** | 32px | 1.2 | 600 | `text-3xl font-semibold leading-tight` | é¡µé¢ä¸»æ ‡é¢˜ |
| **äºŒçº§æ ‡é¢˜** | 24px | 1.3 | 600 | `text-2xl font-semibold leading-snug` | æ¨¡å—æ ‡é¢˜ |
| **ä¸‰çº§æ ‡é¢˜** | 20px | 1.4 | 600 | `text-xl font-semibold` | å°ç»„æ ‡é¢˜ |
| **å¼ºè°ƒæ­£æ–‡** | 16px | 1.5 | 500 | `text-base font-medium leading-relaxed` | å¡ç‰‡å†…å®¹ |
| **æ ‡å‡†æ­£æ–‡** | 14px | 1.5 | 400 | `text-sm leading-relaxed` | é»˜è®¤æ–‡æœ¬ |
| **è¾…åŠ©æ–‡å­—** | 12px | 1.4 | 400 | `text-xs leading-normal` | è¡¨å•æç¤ºã€é¡µè„š |

**é‡è¦ ğŸ”´**: ä¸­æ–‡ç¯å¢ƒå»ºè®®ä½¿ç”¨ `font-semibold (600)` è€Œé `font-bold (700)`ï¼Œä»¥é˜²æ–‡å­—å‘è™šã€‚

### 5.4 é¢œè‰²ä¸å¯¹æ¯”åº¦ (Color & Contrast)

ä¸¥ç¦ä½¿ç”¨çº¯é»‘è‰²ï¼Œé‡‡ç”¨ç°åº¦æ¢¯é˜Ÿä»¥å‡è½»è§†è§‰ç–²åŠ³ï¼š

- **ä¸€çº§æ–‡æœ¬** (æ ‡é¢˜/æ­£æ–‡): `text-foreground` - `rgba(0, 0, 0, 0.88)` (äº®è‰²) / `rgba(255, 255, 255, 0.92)` (æš—è‰²)
- **äºŒçº§æ–‡æœ¬** (æ¬¡è¦ä¿¡æ¯): `text-muted-foreground` - `rgba(0, 0, 0, 0.65)` (äº®è‰²) / `rgba(255, 255, 255, 0.65)` (æš—è‰²)  
- **ä¸‰çº§æ–‡æœ¬** (ç¦ç”¨/å ä½ç¬¦): `text-muted` - æ›´æ·¡çš„ç°åº¦

### 5.5 æ€§èƒ½ä¸åŠ è½½ (Performance)

- âœ… ä¼˜å…ˆä½¿ç”¨ç³»ç»Ÿå­—ä½“ï¼Œé¿å…å¤–éƒ¨ WebFont åŠ è½½å»¶è¿Ÿ
- âœ… è‹¥å¿…é¡»ä½¿ç”¨è‡ªå®šä¹‰å­—ä½“ï¼Œä»…å…è®¸ `.woff2` æ ¼å¼
- âœ… æ·»åŠ  `font-display: swap;` é¿å… FOIT (æ–‡å­—é—ªçƒ)
- âœ… ä¸­æ–‡å­—ä½“å¿…é¡»å­é›†åŒ–ï¼Œä½“ç§¯ â‰¤ 200KB
- âœ… æ¨èä½¿ç”¨ Google Fonts æˆ– Alibaba å…è´¹æ–¹æ¡ˆ

### 5.6 å®æ–½æ£€æŸ¥æ¸…å• (Checklist)

- [ ] æ˜¯å¦åœ¨ Mac ä¸ Windows ä¸‹æ£€æŸ¥è¿‡å­—ä½“ç²—ç»†ï¼Ÿ
- [ ] è¡Œé«˜æ˜¯å¦ä¸¥æ ¼æŒ‰è¡¨æ ¼æ‰§è¡Œï¼Ÿ  
- [ ] æ‰€æœ‰æ•°å€¼/ä»£ç æ˜¯å¦ä½¿ç”¨ `font-mono`ï¼Ÿ
- [ ] é“¾æ¥/æŒ‰é’®ç‚¹å‡»æ€æ˜¯å¦ä¿æŒå­—ä½“é¢œè‰²ä¸€è‡´æ€§ï¼Ÿ
- [ ] ç§»åŠ¨ç«¯æ˜¯å¦æµ‹è¯•è¿‡å­—ä½“ç¼©æ”¾ï¼Ÿ

## 6. H5 å…¼å®¹æ€§ä¸ç§»åŠ¨ç«¯è§„èŒƒ

### 6.1 è§†å£é…ç½® (Viewport)

æ‰€æœ‰é¡µé¢å¿…é¡»åœ¨ `<head>` ä¸­åŒ…å«æ­£ç¡®çš„è§†å£é…ç½®ï¼Œé€šè¿‡ Next.js `metadata` API è®¾ç½®ã€‚

```typescript
export const metadata: Metadata = {
  viewport: {
    width: "device-width",
    initialScale: 1,
    viewportFit: "cover",
    userScalable: false,
  },
  appleWebApp: {
    capable: true,
    statusBarStyle: "black-translucent",
  },
};
```

### 6.2 è§¦æ‘¸ä¸äº¤äº’è§„èŒƒ (Touch & Interaction)

| è§„åˆ™ | æ ‡å‡† | å®ç°æ–¹æ¡ˆ |
|-----|------|--------|
| **æŒ‰é’®æœ€å°ç‚¹å‡»åŒºåŸŸ** | 44Ã—44px | ä½¿ç”¨ `touch-target` æˆ– `h-11 w-11` æˆ–æ›´å¤§ |
| **æŒ‰é’®é—´è·** | â‰¥8px | ä½¿ç”¨ `gap-2` æˆ– `gap-3` |
| **é•¿æŒ‰åé¦ˆ** | éœ€è¦è§†è§‰åé¦ˆ | ä½¿ç”¨ `active:scale-[0.98]` |
| **åŒå‡»ç¼©æ”¾ç¦ç”¨** | `user-scalable=no` | å·²åœ¨ viewport é…ç½®ä¸­ |
| **é“¾æ¥ç‚¹å‡»åŒºåŸŸæ‰©å±•** | å‘¨å›´ 8px | ä½¿ç”¨ `px-3 py-2.5` æˆ– `touch-target` |
| **ç¦ç”¨é•¿æŒ‰èœå•** | ç§»é™¤åŸç”Ÿèœå• | ä½¿ç”¨ `-webkit-touch-callout: none` |

### 6.3 å­—ä½“ä¸è¾“å…¥æ¡†ä¼˜åŒ– (Mobile Typography)

**å…³é”®åŸåˆ™**:
- æ‰€æœ‰è¾“å…¥æ¡†åŸºç¡€å­—å· â‰¥ 16pxï¼Œé˜²æ­¢ iOS Safari è‡ªåŠ¨æ”¾å¤§
- ç¦ç”¨è¾“å…¥æ¡†çš„åŸç”Ÿæ ·å¼ (`-webkit-appearance: none`)
- ç§»é™¤ iOS tap highlight

```css
/* è¾“å…¥æ¡†é˜²æ­¢è‡ªåŠ¨æ”¾å¤§ */
input, textarea, select {
  font-size: 16px; /* >= 16px */
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

/* ç§»åŠ¨ç«¯å“åº”å¼å­—å· */
@media (max-width: 640px) {
  h1 { @apply text-2xl; }    /* 32px â†’ 24px */
  h2 { @apply text-xl; }     /* 24px â†’ 20px */
  h3 { @apply text-lg; }     /* 20px â†’ 18px */
}
```

### 6.4 å®‰å…¨åŒºåŸŸé€‚é… (iOS Notch & Home Indicator)

ä½¿ç”¨ CSS ç¯å¢ƒå˜é‡é€‚é… iOS åˆ˜æµ·å±å’Œ Home Indicatorï¼š

```css
.safe-top { @apply pt-[env(safe-area-inset-top)]; }
.safe-bottom { @apply pb-[env(safe-area-inset-bottom)]; }
.safe-left { @apply pl-[env(safe-area-inset-left)]; }
.safe-right { @apply pr-[env(safe-area-inset-right)]; }
```

åº”ç”¨æ–¹å¼ï¼š
- å¯¼èˆªæ é¡¶éƒ¨: `<header className="safe-top">...</header>`
- åº•éƒ¨å¯¼èˆª: `<footer className="safe-bottom">...</footer>`

### 6.5 æ€§èƒ½ä¼˜åŒ– (Mobile Performance)

- âœ… **å›¾ç‰‡**: ä½¿ç”¨ Next.js `<Image />` ç»„ä»¶ï¼Œå¯ç”¨ `priority` å’Œ `placeholder`
- âœ… **CSS**: Tailwind JIT ç¼–è¯‘ï¼Œäº§ç”Ÿæœ€å° CSS ä½“ç§¯
- âœ… **é‡æ’**: é¿å…åŠ¨æ€é«˜åº¦å˜åŒ–ï¼Œä½¿ç”¨å›ºå®šå°ºå¯¸
- âœ… **æ‡’åŠ è½½**: ä½¿ç”¨ `loading="lazy"` å»¶è¿ŸåŠ è½½å›¾ç‰‡
- âœ… **é˜²æŠ–èŠ‚æµ**: è¡¨å•æäº¤ã€æ»šåŠ¨äº‹ä»¶ä½¿ç”¨é˜²æŠ–/èŠ‚æµ

### 6.6 å“åº”å¼è®¾è®¡æ–­ç‚¹ (Responsive Breakpoints)

| è®¾å¤‡ | Tailwind å‰ç¼€ | CSS èŒƒå›´ | åº”ç”¨åœºæ™¯ |
|-----|-------------|---------|--------|
| **æ‰‹æœºç«–å±** | None | < 640px | å•åˆ—å¸ƒå±€ï¼Œå †å ç»„ä»¶ |
| **æ‰‹æœºæ¨ªå±** | `sm` | â‰¥ 640px | ä¸¤åˆ—å¸ƒå±€ï¼Œç´§å‡‘é—´è· |
| **å¹³æ¿** | `md` | â‰¥ 768px | ä¸‰åˆ—å¸ƒå±€ï¼Œæ­£å¸¸é—´è· |
| **æ¡Œé¢** | `lg`/`xl` | â‰¥ 1024px | å¤šåˆ—å¸ƒå±€ï¼Œå¤§é—´è· |

### 6.7 H5 æ£€æŸ¥æ¸…å• (Checklist)

- [ ] æ‰€æœ‰æŒ‰é’®/é“¾æ¥ â‰¥ 44Ã—44pxï¼Œæˆ–æœ‰å……åˆ†çš„ padding
- [ ] è¾“å…¥æ¡†å­—å· â‰¥ 16pxï¼ˆé˜²æ­¢ iOS è‡ªåŠ¨æ”¾å¤§ï¼‰
- [ ] å†…å®¹å®½åº¦ä½¿ç”¨ `max-w-5xl` é™åˆ¶ï¼Œé˜²æ­¢è¿‡åº¦æ‹‰ä¼¸
- [ ] é¡¶éƒ¨å¯¼èˆªæ é¢„ç•™å®‰å…¨åŒºï¼ˆ`safe-top`ï¼‰
- [ ] åº•éƒ¨æ“ä½œæ é¢„ç•™å®‰å…¨åŒºï¼ˆ`safe-bottom`ï¼‰
- [ ] è¡¨å•æœ‰æ˜æ˜¾çš„ `:focus` å’Œ `:active` åé¦ˆ
- [ ] å›¾ç‰‡ä½¿ç”¨ Next.js `<Image />` å¹¶å¯ç”¨å“åº”å¼
- [ ] è§¦æ‘¸ç›®æ ‡é—´è· â‰¥ 8px
- [ ] åœ¨çœŸæœºä¸Šæµ‹è¯•ç«–å±å’Œæ¨ªå±æ¨¡å¼
- [ ] åœ¨ 2G/3G ç½‘ç»œä¸‹æµ‹è¯•åŠ è½½é€Ÿåº¦

